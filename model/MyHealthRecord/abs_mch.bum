<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.comment="The most abstract machine of the system. In My Health Record&#10;   only people, health service provides and heal records can be&#10;   seen. Access to resources are granted or restricted&#10;&#10;&#9;This machine (and the refinements) model event that both consumers and&#10;&#9;&#9;admin of the system can perform. For instance, a consumer can restrict&#10;&#9;&#9;access to their My Health Record and the admin of the system can add&#10;&#9;&#9;a Service Provider to the system.&#10;&#9;&#9;(3 March): this can be solved by decomposing the machine (TODO). For now, each&#10;&#9;&#9;&#9;&#9;event has a tag ([USER, ADMIN]) as comment&#10;&#10;&#10;&#10;&#9;Model decisions and questions&#10;   &#9;&#9;delete_service_provider: delete sp only if it does not have any consumer&#10;&#9;&#9;add_consumer_to_sp: what is the default access from sp to consumers' health provider?&#10;&#9;&#9;&#9;&#9;-&gt; modelled as: initially, a sp has access to its consumers&#10;&#9;&#9;opt_out: should the consumer be completly deleted? This is the choice at the moment&#10;&#9;&#9;&#9;&#9;-&gt; it could be an idle user?&#10;&#10;" org.eventb.core.configuration="org.eventb.core.fwd" org.eventb.core.generated="false" org.eventb.texttools.text_lastmodified="1583218171000" org.eventb.texttools.text_representation="machine abs_mch&#10;/* The most abstract machine of the system. In My Health Record&#10;   only people, health service provides and heal records can be&#10;   seen. Access to resources are granted or restricted&#10;&#10;&#9;This machine (and the refinements) model event that both consumers and&#10;&#9;&#9;admin of the system can perform. For instance, a consumer can restrict&#10;&#9;&#9;access to their My Health Record and the admin of the system can add&#10;&#9;&#9;a Service Provider to the system.&#10;&#9;&#9;(3 March): this can be solved by decomposing the machine (TODO). For now, each&#10;&#9;&#9;&#9;&#9;event has a tag ([USER, ADMIN]) as comment&#10;&#10;&#10;&#10;&#9;Model decisions and questions&#10;   &#9;&#9;delete_service_provider: delete sp only if it does not have any consumer&#10;&#9;&#9;add_consumer_to_sp: what is the default access from sp to consumers' health provider?&#10;&#9;&#9;&#9;&#9;-&gt; modelled as: initially, a sp has access to its consumers&#10;&#9;&#9;opt_out: should the consumer be completly deleted? This is the choice at the moment&#10;&#9;&#9;&#9;&#9;-&gt; it could be an idle user?&#10;&#10;*/&#10; sees abs_ctx&#10;&#10;variables health_record_DB // models the centralised DB where all health records are held&#10;          consumers // models the people that have health records&#10;          service_providers // models registered Health Service Providers.&#10;          my_health_records&#10;          /* maps Health Recods to Consumers as a one to one relation&#10;             one Health Record belongs to a single consumer and one consumer has&#10;             only one Health Record */&#10;          my_health_service_providers&#10;          /* maps Consumers to Health Service Provider. A consumer might&#10;             have several (or none) health service providers and a health service provider&#10;             might have several (or none) consumers */&#10;          access_sp_record // models the access permission to health records from health service providers.&#10;&#10;&#10;invariants&#10;  @inv1 health_record_DB ⊆ MY_HEALTH_RECORD&#10;  @inv2 consumers ⊆ PEOPLE&#10;  @inv3 service_providers ⊆ SERVICE_PROVIDERS&#10;  @inv4 my_health_records ∈  health_record_DB ⤖ consumers&#10;  @inv5 my_health_service_providers ∈ consumers ↔ service_providers&#10;  @inv6 access_sp_record ∈ service_providers ↔ health_record_DB&#10;  @inv7 (access_sp_record;my_health_records)∼ ⊆ my_health_service_providers&#10;&#10;events&#10;  event INITIALISATION&#10;    then&#10;      @act1 health_record_DB ≔ ∅&#10;      @act2 consumers ≔ ∅&#10;      @act3 service_providers ≔ ∅&#10;      @act4 my_health_records ≔ ∅&#10;      @act5 my_health_service_providers ≔ ∅&#10;      @act6 access_sp_record ≔ ∅&#10;  end&#10;&#10;  event restrict_access // USER&#10;    any c // consumer restricing access&#10;        sp // service provider whose access might be restricted&#10;    where&#10;      @grd1 c ∈ consumers&#10;      @grd2 sp ∈ service_providers&#10;      @grd3 c ↦ sp ∈ my_health_service_providers // c belongs to sp service provider&#10;      @grd4 sp ↦ my_health_records∼(c) ∈ access_sp_record // access has not been previously restricted&#10;    then&#10;      @act1 access_sp_record ≔  access_sp_record∖{sp ↦ my_health_records∼(c)}&#10;  end&#10;&#10;  event grant_access // USER&#10;    any c // consumer granting access&#10;        sp // service provider whose access will be granted&#10;    where&#10;      @grd1 c ∈ consumers&#10;      @grd2 sp ∈ service_providers&#10;      @grd3 c ↦ sp ∈ my_health_service_providers // c belongs to sp service provider&#10;      @grd4 sp ↦ my_health_records∼(c) ∉ access_sp_record  // access is currently restricted&#10;    then&#10;      @act1 access_sp_record ≔  access_sp_record ∪ {sp ↦ my_health_records∼(c)}&#10;  end&#10;&#10;  event opt_in // USER&#10;  &#9;any c // new consumer&#10;  &#9;&#9;mhr // a new consumer is associated a new my health record&#10;  &#9;where&#10;  &#9;&#9;@grd1 c ∈ PEOPLE∖consumers&#10;  &#9;&#9;@grd2 mhr ∈ MY_HEALTH_RECORD∖health_record_DB&#10;  &#9;then&#10;  &#9;&#9;@act1 consumers ≔ consumers ∪ {c}&#10;  &#9;&#9;@act2 health_record_DB ≔ health_record_DB ∪ {mhr}&#10;  &#9;&#9;@act3 my_health_records ≔ my_health_records ∪ {mhr↦c}&#10;&#9;end&#10;&#10;&#9;event opt_out // USER&#10;  &#9;any c // consumer to delete&#10;  &#9;&#9;/*&#10;  &#9;&#9;&#9;a consumer can, at any time, delete their account&#10;  &#9;&#9;*/&#10;  &#9;where&#10;  &#9;&#9;@grd1 c ∈ consumers&#10;  &#9;then&#10;  &#9;&#9;@act1 consumers ≔ consumers ∖ {c}&#10;  &#9;&#9;@act2 health_record_DB ≔ health_record_DB ∖ {my_health_records∼(c)}&#10;  &#9;&#9;@act3 my_health_records ≔ my_health_records ∖ {my_health_records∼(c)↦c}&#10;  &#9;&#9;@act4 my_health_service_providers ≔ {c} ⩤ my_health_service_providers&#10;  &#9;&#9;@act5 access_sp_record ≔ access_sp_record ⩥ {my_health_records∼(c)}&#10;  &#9;end&#10;&#10;&#10;&#10;  &#9;event add_service_provider // ADMIN&#10;  &#9;any sp // new service provider&#10;  &#9;where&#10;  &#9;&#9;@grd1 sp ∈ SERVICE_PROVIDERS∖service_providers&#10;  &#9;then&#10;  &#9;&#9;@act1 service_providers ≔ service_providers ∪ {sp}&#10;&#9;end&#10;&#10;&#9;event delete_service_provider // ADMIN&#10;  &#9;any sp // service provider to delete&#10;  &#9;where&#10;  &#9;&#9;@grd1 sp ∈ service_providers&#10;  &#9;&#9;@grd2 sp ∉ ran(my_health_service_providers)&#10;  &#9;then&#10;  &#9;&#9;@act1 service_providers ≔ service_providers ∖ {sp}&#10;  &#9;end&#10;&#10;  &#9;event remove_consumer_from_sp // ADMIN&#10;  &#9;any c // consumer&#10;&#9;&#9;sp // service provider&#10;  &#9;where&#10;  &#9;&#9;@grd1 c↦sp ∈ my_health_service_providers&#10;  &#9;then&#10;  &#9;&#9;@act1 my_health_service_providers ≔ my_health_service_providers ∖ {c↦sp}&#10;  &#9;&#9;@act2 access_sp_record ≔ access_sp_record ⩥ {my_health_records∼(c)}&#10;  &#9;&#9;&#9;// sp does not longer have access to c's health record&#10;  &#9;end&#10;&#10;&#9;event add_consumer_to_sp // ADMIN&#10;  &#9;any c // consumer&#10;&#9;&#9;sp // service provider&#10;  &#9;where&#10;&#9;&#9;@grd1 c ∈ consumers&#10;&#9;&#9;@grd2 sp ∈ service_providers&#10;&#9;&#9;@grd3 c↦sp ∉ my_health_service_providers&#10;  &#9;then&#10;  &#9;&#9;@act1 my_health_service_providers ≔ my_health_service_providers ∪ {c↦sp}&#10;  &#9;&#9;@act2 access_sp_record ≔  access_sp_record ∪ {sp↦ my_health_records∼(c)}&#10;  &#9;&#9;&#9;//by default: access to c's My Health Record&#10;  &#9;end&#10;end&#10;" version="5">
<org.eventb.core.seesContext name="_FiWeYFxzEeqNLv8xNYgXlw" org.eventb.core.target="abs_ctx"/>
<org.eventb.core.event name="'" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="INITIALISATION">
<org.eventb.core.action name="_QFy9EFx1EeqNLv8xNYgXlw" org.eventb.core.assignment="health_record_DB ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_QFzkIFx1EeqNLv8xNYgXlw" org.eventb.core.assignment="consumers ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_QFzkIVx1EeqNLv8xNYgXlw" org.eventb.core.assignment="service_providers ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.action name="_QFzkIlx1EeqNLv8xNYgXlw" org.eventb.core.assignment="my_health_records ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
<org.eventb.core.action name="_QFzkI1x1EeqNLv8xNYgXlw" org.eventb.core.assignment="my_health_service_providers ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
<org.eventb.core.action name="_QFzkJFx1EeqNLv8xNYgXlw" org.eventb.core.assignment="access_sp_record ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act6"/>
</org.eventb.core.event>
<org.eventb.core.variable name="_IUjq0Fx0EeqNLv8xNYgXlw" org.eventb.core.comment="models the centralised DB where all health records are held" org.eventb.core.generated="false" org.eventb.core.identifier="health_record_DB"/>
<org.eventb.core.variable name="_pPh3EFx0EeqNLv8xNYgXlw" org.eventb.core.comment="models the people that have health records" org.eventb.core.generated="false" org.eventb.core.identifier="consumers"/>
<org.eventb.core.variable name="_IUjq0lx0EeqNLv8xNYgXlw" org.eventb.core.comment="models registered Health Service Providers." org.eventb.core.generated="false" org.eventb.core.identifier="service_providers"/>
<org.eventb.core.variable name="_pPh3EVx0EeqNLv8xNYgXlw" org.eventb.core.comment="maps Health Recods to Consumers as a one to one relation&#10;             one Health Record belongs to a single consumer and one consumer has&#10;             only one Health Record " org.eventb.core.generated="false" org.eventb.core.identifier="my_health_records"/>
<org.eventb.core.variable name="_pPieIFx0EeqNLv8xNYgXlw" org.eventb.core.comment="maps Consumers to Health Service Provider. A consumer might&#10;             have several (or none) health service providers and a health service provider&#10;             might have several (or none) consumers " org.eventb.core.generated="false" org.eventb.core.identifier="my_health_service_providers"/>
<org.eventb.core.variable name="_IUkR4lx0EeqNLv8xNYgXlw" org.eventb.core.comment="models the access permission to health records from health service providers." org.eventb.core.generated="false" org.eventb.core.identifier="access_sp_record"/>
<org.eventb.core.invariant name="_pPieIVx0EeqNLv8xNYgXlw" org.eventb.core.generated="false" org.eventb.core.label="inv1" org.eventb.core.predicate="health_record_DB ⊆ MY_HEALTH_RECORD"/>
<org.eventb.core.invariant name="_pPieIlx0EeqNLv8xNYgXlw" org.eventb.core.generated="false" org.eventb.core.label="inv2" org.eventb.core.predicate="consumers ⊆ PEOPLE"/>
<org.eventb.core.invariant name="_pPieI1x0EeqNLv8xNYgXlw" org.eventb.core.generated="false" org.eventb.core.label="inv3" org.eventb.core.predicate="service_providers ⊆ SERVICE_PROVIDERS"/>
<org.eventb.core.invariant name="_pPieJFx0EeqNLv8xNYgXlw" org.eventb.core.generated="false" org.eventb.core.label="inv4" org.eventb.core.predicate="my_health_records ∈  health_record_DB ⤖ consumers"/>
<org.eventb.core.invariant name="_pPjFMFx0EeqNLv8xNYgXlw" org.eventb.core.generated="false" org.eventb.core.label="inv5" org.eventb.core.predicate="my_health_service_providers ∈ consumers ↔ service_providers"/>
<org.eventb.core.invariant name="_pPjFMVx0EeqNLv8xNYgXlw" org.eventb.core.generated="false" org.eventb.core.label="inv6" org.eventb.core.predicate="access_sp_record ∈ service_providers ↔ health_record_DB"/>
<org.eventb.core.invariant name="_QF0LMFx1EeqNLv8xNYgXlw" org.eventb.core.generated="false" org.eventb.core.label="inv7" org.eventb.core.predicate="(access_sp_record;my_health_records)∼ ⊆ my_health_service_providers"/>
<org.eventb.core.event name="_HOM00Fx2EeqNLv8xNYgXlw" org.eventb.core.comment="USER" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="restrict_access">
<org.eventb.core.parameter name="_HOM00Vx2EeqNLv8xNYgXlw" org.eventb.core.comment="consumer restricing access" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.parameter name="_uU4VYFx2EeqNLv8xNYgXlw" org.eventb.core.comment="service provider whose access might be restricted" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.guard name="_HOM00lx2EeqNLv8xNYgXlw" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_uU4VYVx2EeqNLv8xNYgXlw" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="sp ∈ service_providers"/>
<org.eventb.core.guard name="_uU4VYlx2EeqNLv8xNYgXlw" org.eventb.core.comment="c belongs to sp service provider" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="c ↦ sp ∈ my_health_service_providers"/>
<org.eventb.core.guard name="_v3LOkFx2EeqNLv8xNYgXlw" org.eventb.core.comment="access has not been previously restricted" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="sp ↦ my_health_records∼(c) ∈ access_sp_record"/>
<org.eventb.core.action name="_HONb4Fx2EeqNLv8xNYgXlw" org.eventb.core.assignment="access_sp_record ≔  access_sp_record∖{sp ↦ my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
</org.eventb.core.event>
<org.eventb.core.event name="_lCSqEF0CEeq-wtyRsAV-BQ" org.eventb.core.comment="USER" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="grant_access">
<org.eventb.core.parameter name="_lCSqEV0CEeq-wtyRsAV-BQ" org.eventb.core.comment="consumer granting access" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.parameter name="_lCSqEl0CEeq-wtyRsAV-BQ" org.eventb.core.comment="service provider whose access will be granted" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.guard name="_lCSqE10CEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_lCSqFF0CEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="sp ∈ service_providers"/>
<org.eventb.core.guard name="_lCTRIF0CEeq-wtyRsAV-BQ" org.eventb.core.comment="c belongs to sp service provider" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="c ↦ sp ∈ my_health_service_providers"/>
<org.eventb.core.guard name="_lCTRIV0CEeq-wtyRsAV-BQ" org.eventb.core.comment="access is currently restricted" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="sp ↦ my_health_records∼(c) ∉ access_sp_record"/>
<org.eventb.core.action name="_lCTRIl0CEeq-wtyRsAV-BQ" org.eventb.core.assignment="access_sp_record ≔  access_sp_record ∪ {sp ↦ my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
</org.eventb.core.event>
<org.eventb.core.event name="_xUlAcF0VEeq-wtyRsAV-BQ" org.eventb.core.comment="USER" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="opt_in">
<org.eventb.core.parameter name="_YMPIMV0DEeq-wtyRsAV-BQ" org.eventb.core.comment="new consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.parameter name="_YMPIMl0DEeq-wtyRsAV-BQ" org.eventb.core.comment="a new consumer is associated a new my health record" org.eventb.core.generated="false" org.eventb.core.identifier="mhr"/>
<org.eventb.core.guard name="_YMPIM10DEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="c ∈ PEOPLE∖consumers"/>
<org.eventb.core.guard name="_YMPINF0DEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="mhr ∈ MY_HEALTH_RECORD∖health_record_DB"/>
<org.eventb.core.action name="_YMPvQF0DEeq-wtyRsAV-BQ" org.eventb.core.assignment="consumers ≔ consumers ∪ {c}" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_YMPvQV0DEeq-wtyRsAV-BQ" org.eventb.core.assignment="health_record_DB ≔ health_record_DB ∪ {mhr}" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_ZcpnMF0DEeq-wtyRsAV-BQ" org.eventb.core.assignment="my_health_records ≔ my_health_records ∪ {mhr↦c}" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_3F0mUF0VEeq-wtyRsAV-BQ" org.eventb.core.comment="USER" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="opt_out">
<org.eventb.core.parameter name="_zwKFUV0FEeq-wtyRsAV-BQ" org.eventb.core.comment="consumer to delete&#10;&#10;  &#9;&#9;&#9;a consumer can, at any time, delete their account&#10;  &#9;&#9;" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.guard name="_zwKFUl0FEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.action name="_zwKFU10FEeq-wtyRsAV-BQ" org.eventb.core.assignment="consumers ≔ consumers ∖ {c}" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_6hKfEF0FEeq-wtyRsAV-BQ" org.eventb.core.assignment="health_record_DB ≔ health_record_DB ∖ {my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_7F8nIF0FEeq-wtyRsAV-BQ" org.eventb.core.assignment="my_health_records ≔ my_health_records ∖ {my_health_records∼(c)↦c}" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.action name="_LkYIcF0GEeq-wtyRsAV-BQ" org.eventb.core.assignment="my_health_service_providers ≔ {c} ⩤ my_health_service_providers" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
<org.eventb.core.action name="_OmzXoF0GEeq-wtyRsAV-BQ" org.eventb.core.assignment="access_sp_record ≔ access_sp_record ⩥ {my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
</org.eventb.core.event>
<org.eventb.core.event name="_l99rUF0GEeq-wtyRsAV-BQ" org.eventb.core.comment="ADMIN" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="add_service_provider">
<org.eventb.core.parameter name="_l99rUV0GEeq-wtyRsAV-BQ" org.eventb.core.comment="new service provider" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.guard name="_l99rUl0GEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="sp ∈ SERVICE_PROVIDERS∖service_providers"/>
<org.eventb.core.action name="_l99rU10GEeq-wtyRsAV-BQ" org.eventb.core.assignment="service_providers ≔ service_providers ∪ {sp}" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
</org.eventb.core.event>
<org.eventb.core.event name="_l99rVF0GEeq-wtyRsAV-BQ" org.eventb.core.comment="ADMIN" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="delete_service_provider">
<org.eventb.core.parameter name="_l99rVV0GEeq-wtyRsAV-BQ" org.eventb.core.comment="service provider to delete" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.guard name="_l99rVl0GEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="sp ∈ service_providers"/>
<org.eventb.core.guard name="_BjCw8F0HEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="sp ∉ ran(my_health_service_providers)"/>
<org.eventb.core.action name="_l99rV10GEeq-wtyRsAV-BQ" org.eventb.core.assignment="service_providers ≔ service_providers ∖ {sp}" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hk0rYF0HEeq-wtyRsAV-BQ" org.eventb.core.comment="ADMIN" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="remove_consumer_from_sp">
<org.eventb.core.parameter name="_hk0rYV0HEeq-wtyRsAV-BQ" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.parameter name="_hk0rYl0HEeq-wtyRsAV-BQ" org.eventb.core.comment="service provider" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.guard name="_hk0rY10HEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="c↦sp ∈ my_health_service_providers"/>
<org.eventb.core.action name="_hk0rZF0HEeq-wtyRsAV-BQ" org.eventb.core.assignment="my_health_service_providers ≔ my_health_service_providers ∖ {c↦sp}" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_ez3xQF0IEeq-wtyRsAV-BQ" org.eventb.core.assignment="access_sp_record ≔ access_sp_record ⩥ {my_health_records∼(c)}" org.eventb.core.comment="sp does not longer have access to c's health record" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_ytcZMF0HEeq-wtyRsAV-BQ" org.eventb.core.comment="ADMIN" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="add_consumer_to_sp">
<org.eventb.core.parameter name="_ytdAQF0HEeq-wtyRsAV-BQ" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.parameter name="_hk0rZl0HEeq-wtyRsAV-BQ" org.eventb.core.comment="service provider" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.guard name="_hk0rZ10HEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_mEyIMF0KEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="sp ∈ service_providers"/>
<org.eventb.core.guard name="_mEyIMV0KEeq-wtyRsAV-BQ" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="c↦sp ∉ my_health_service_providers"/>
<org.eventb.core.action name="_hk0raF0HEeq-wtyRsAV-BQ" org.eventb.core.assignment="my_health_service_providers ≔ my_health_service_providers ∪ {c↦sp}" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_aQO8EF0KEeq-wtyRsAV-BQ" org.eventb.core.assignment="access_sp_record ≔  access_sp_record ∪ {sp↦ my_health_records∼(c)}" org.eventb.core.comment="by default: access to c's My Health Record" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
</org.eventb.core.event>
</org.eventb.core.machineFile>
