<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.comment="This machine introduces (permissions) level of access from Health Service Providers and level of&#10;   access that records can have. This machine does not consider Nominated and Authorised people. This&#10;   will introduced in a later refinement&#10;   Record Access Levels&#10;   General Access: authorised Health Service Providers can view the record;&#10;   Restricted Access: authorised Health Service Providers with  'Restricted Access'&#10;   permissions can view the record;&#10;   Hide Record: no one (no even the owner) can view this record. The record can be recovered; and&#10;   Removed Document: no access. This is a permanent record removal.&#10;   Health Service Provider Access Levels:&#10;   General Access: allows authorised individuals from a Health Service Provider (individuals,&#10;   e.g. a doctor, is not modelled yet) to access a My Health Record and view&#10;   records set 'General Access'.&#10;   Any report uploaded by this Health Service Provider will be ser 'General Access';&#10;   Restricted Access: allows authorised individuals from a Health Service Provider (individuals,&#10;   e.g. a doctor, is not modelled yet) to access a My Health Record and view&#10;   records set both 'General Access' and 'Restricted Access'.&#10;   Any report uploaded by this Health Service Provider will be ser 'Restricted Access';&#10;   Revoked Access: prevents an organisation from accessing reports in the My Health Record. " org.eventb.core.configuration="org.eventb.core.fwd" org.eventb.core.generated="false" org.eventb.texttools.text_lastmodified="1583304753680" org.eventb.texttools.text_representation="machine ref2_access&#10;/* This machine introduces (permissions) level of access from Health Service Providers and level of&#10;   access that records can have. This machine does not consider Nominated and Authorised people. This&#10;   will introduced in a later refinement&#10;   Record Access Levels&#10;   General Access: authorised Health Service Providers can view the record;&#10;   Restricted Access: authorised Health Service Providers with  'Restricted Access'&#10;   permissions can view the record;&#10;   Hide Record: no one (no even the owner) can view this record. The record can be recovered; and&#10;   Removed Document: no access. This is a permanent record removal.&#10;   Health Service Provider Access Levels:&#10;   General Access: allows authorised individuals from a Health Service Provider (individuals,&#10;   e.g. a doctor, is not modelled yet) to access a My Health Record and view&#10;   records set 'General Access'.&#10;   Any report uploaded by this Health Service Provider will be ser 'General Access';&#10;   Restricted Access: allows authorised individuals from a Health Service Provider (individuals,&#10;   e.g. a doctor, is not modelled yet) to access a My Health Record and view&#10;   records set both 'General Access' and 'Restricted Access'.&#10;   Any report uploaded by this Health Service Provider will be ser 'Restricted Access';&#10;   Revoked Access: prevents an organisation from accessing reports in the My Health Record. */&#10; refines ref1  sees ref1_ctx&#10;&#10;variables health_record_DB // models the centralised DB where all health records are held&#10;          consumers // models the people that have health records&#10;          service_providers // models registered Health Service Providers.&#10;          my_health_records&#10;          /* maps Health Recods to Consumers as a one to one relation&#10;             one Health Record belongs to a single consumer and one consumer has&#10;             only one Health Record */&#10;          my_health_service_providers&#10;          /* maps Consumers to Health Service Provider. A consumer might&#10;             have several (or none) health service providers and a health service provider&#10;             might have several (or none) consumers */&#10;          access_sp_record&#10;          /* models the access permission to health records from health service providers.&#10;             REFINEMENT 1 */&#10;          records // each health resource e.g. a blood test.&#10;          record_mhr // maps each record to a My Health Record&#10;          ownership // maps recors to their owner&#10;          /* REFINEMENT 2 */&#10;          general_access_list_sp // maps Health Service Providers with 'General Access' to My Health Record&#10;          restricted_access_list_sp // maps Health Service Providers with 'Restricted Access' to My Health Record&#10;          revoked_list_sp // maps Health Service Providers whose access have been revoked to My Health Record&#10;          record_general_list // maps a record with 'General Access' to the My Health Record it belongs to&#10;          record_restricted_list // maps a record with 'Restricted Access' to the My Health Record it belongs to&#10;          record_hide_list // maps a hidden record to the My Health Record it belongs to&#10;&#10;&#10;invariants&#10;  @inv1_r2 general_access_list_sp ∈ service_providers ↔  health_record_DB&#10;  @inv2_r2 restricted_access_list_sp ∈ service_providers ↔  health_record_DB&#10;  @inv3_r2 revoked_list_sp ∈ service_providers ↔  health_record_DB&#10;  @inv4_r2 general_access_list_sp ∩ restricted_access_list_sp ∩ revoked_list_sp = ∅ // each Health Service Provider has only one access level to a My Health Record&#10;  @inv5_r2 general_access_list_sp ∪ restricted_access_list_sp ∪ revoked_list_sp = access_sp_record&#10;  @inv6_r2 record_general_list ∈ records ↔ health_record_DB&#10;  @inv7_r2 record_restricted_list ∈ records ↔ health_record_DB&#10;  @inv8_r2 record_hide_list ∈ records ↔ health_record_DB&#10;  @inv9_r2 record_general_list ∩ record_restricted_list ∩ record_hide_list = ∅ // each report has only one access level&#10;  @inv10_r2 record_general_list ∪ record_restricted_list ∪ record_hide_list = record_mhr // To check: the owner of the record has all permissions&#10;&#10;events&#10;  event INITIALISATION extends INITIALISATION&#10;    then&#10;      @act1_r2 general_access_list_sp ≔ ∅&#10;      @act2_r2 restricted_access_list_sp ≔ ∅&#10;      @act3_r2 revoked_list_sp ≔  ∅&#10;      @act4_r2 record_general_list ≔ ∅&#10;      @act5_r2 record_restricted_list ≔ ∅&#10;      @act6_r2 record_hide_list ≔  ∅&#10;  end&#10;&#10;  event remove_access extends remove_access&#10; &#9;then&#10;&#9;&#9;@act1_r2 general_access_list_sp ≔ general_access_list_sp∖{sp ↦ my_health_records∼(c)}&#10;&#9;&#9;@act2_r2 restricted_access_list_sp ≔ restricted_access_list_sp∖{sp ↦ my_health_records∼(c)}&#10;&#9;&#9;@act3_r2 revoked_list_sp ≔ revoked_list_sp∖{sp ↦ my_health_records∼(c)}&#10;  end&#10;&#10;  event opt_in extends opt_in&#10;  end&#10;&#10;  event opt_out extends opt_out&#10;  &#9;then&#10;&#9;&#9;@act1_r2 general_access_list_sp ≔ general_access_list_sp ⩥ {my_health_records∼(c)}&#10;&#9;&#9;@act2_r2 restricted_access_list_sp ≔ restricted_access_list_sp ⩥ {my_health_records∼(c)}&#10;&#9;&#9;@act3_r2 revoked_list_sp ≔ revoked_list_sp ⩥ {my_health_records∼(c)}&#10;      &#9;@act5_r2 record_general_list ≔ ownership∼[{c}] ⩤ record_general_list&#10;      &#9;@act6_r2 record_restricted_list ≔ ownership∼[{c}] ⩤ record_restricted_list&#10;      &#9;@act7_r2 record_hide_list ≔ ownership∼[{c}] ⩤ record_hide_list&#10;  end&#10;&#10;  event add_service_provider extends add_service_provider&#10;  then&#10;&#9;@act1_r2 general_access_list_sp ≔ {sp} ⩤ general_access_list_sp&#10;  &#9;@act2_r2 restricted_access_list_sp ≔ {sp} ⩤ restricted_access_list_sp&#10;  &#9;@act3_r2 revoked_list_sp ≔ {sp} ⩤ revoked_list_sp&#10;  end&#10;&#10;  event delete_service_provider extends delete_service_provider&#10;  end&#10;&#10;  event add_consumer_to_sp extends add_consumer_to_sp&#10;  then&#10;  &#9;@act1_r2 general_access_list_sp ≔ general_access_list_sp ∪ {sp↦ my_health_records∼(c)}&#10;  end&#10;&#10;  event add_record_owner extends add_record&#10;  then&#10;  &#9;@act1_r2 record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}&#10;  end&#10;&#10;  event add_record_sp_general extends add_record&#10;  any&#10;  &#9;sp&#10;  where&#10;  &#9;@grd1_r2 sp ∈ service_providers&#10;  &#9;@grd2_r2 sp↦my_health_records∼(c) ∈ general_access_list_sp&#10;  then&#10;  &#9;@act1_r2 record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}&#10;  end&#10;&#10;  event add_record_sp_restricted extends add_record&#10;  any&#10;  &#9;sp&#10;  where&#10;  &#9;@grd1_r2 sp ∈ service_providers&#10;  &#9;@grd2_r2 sp↦my_health_records∼(c) ∈ restricted_access_list_sp&#10;  then&#10;  &#9;@act1_r2 record_restricted_list ≔ record_restricted_list ∪ {r↦my_health_records∼(c)}&#10;  end&#10;&#10;  event grant_access_to_SP extends grant_access&#10;  then&#10;&#9;@act1_r2 general_access_list_sp ≔  general_access_list_sp ∪ {sp↦my_health_records∼(c)}&#10;  end&#10;&#10;  event give_general_access_to_SP&#10;  any&#10;  &#9;sp // service provider&#10;  &#9;c // consumer&#10;  where&#10;  &#9;@grd1_r2 sp ∈ service_providers&#10;  &#9;@grd2_r2 c ∈ consumers&#10;  &#9;@grd3_r2 sp↦my_health_records∼(c) ∉ general_access_list_sp&#10;  &#9;@grd4_r2 sp↦my_health_records∼(c) ∈ restricted_access_list_sp ∨ sp↦my_health_records∼(c) ∈ revoked_list_sp&#10;  then&#10;  &#9;@act1_r2 general_access_list_sp ≔  general_access_list_sp ∪ {sp↦my_health_records∼(c)}&#10;  &#9;@act2_r2 restricted_access_list_sp ≔ restricted_access_list_sp ∖ {sp↦my_health_records∼(c)}&#10; &#9;@act3_r2 revoked_list_sp   ≔ revoked_list_sp ∖ {sp↦my_health_records∼(c)}&#10;  end&#10;&#10;  event give_restricted_access_to_SP&#10;  any&#10;  &#9;sp // service provider&#10;  &#9;c // consumer&#10;  where&#10;  &#9;@grd1_r2 sp ∈ service_providers&#10;  &#9;@grd2_r2 c ∈ consumers&#10;  &#9;@grd3_r2 sp↦my_health_records∼(c) ∉ restricted_access_list_sp&#10;  &#9;@grd4_r2 sp↦my_health_records∼(c) ∈ general_access_list_sp ∨ sp↦my_health_records∼(c) ∈ revoked_list_sp&#10;  then&#10;  &#9;@act1_r2 general_access_list_sp ≔  general_access_list_sp ∖ {sp↦my_health_records∼(c)}&#10;  &#9;@act2_r2 restricted_access_list_sp ≔ restricted_access_list_sp ∪ {sp↦my_health_records∼(c)}&#10; &#9;@act3_r2 revoked_list_sp   ≔ revoked_list_sp ∖ {sp↦my_health_records∼(c)}&#10;  end&#10;&#10;  event revoke_access_to_SP&#10;  any&#10;  &#9;sp // service provider&#10;  &#9;c // consumer&#10;  where&#10;  &#9;@grd1_r2 sp ∈ service_providers&#10;  &#9;@grd2_r2 c ∈ consumers&#10;  &#9;@grd3_r2 sp↦my_health_records∼(c) ∉ revoked_list_sp&#10;  &#9;@grd4_r2 sp↦my_health_records∼(c) ∈ general_access_list_sp ∨ sp↦my_health_records∼(c) ∈ restricted_access_list_sp&#10;  then&#10;  &#9;@act1_r2 general_access_list_sp ≔  general_access_list_sp ∖ {sp↦my_health_records∼(c)}&#10;  &#9;@act2_r2 restricted_access_list_sp ≔ restricted_access_list_sp ∖ {sp↦my_health_records∼(c)}&#10; &#9;@act3_r2 revoked_list_sp   ≔ revoked_list_sp ∪ {sp↦my_health_records∼(c)}&#10;  end&#10;&#10;  event restrict_record&#10;  any&#10;  &#9;r // record&#10;  &#9;c // consumer&#10;  where&#10;  &#9;@grd1_r2 r ∈ records&#10;  &#9;@grd2_r2 c ∈ consumers&#10;  &#9;@grd3_r2 r↦c∈ownership&#10;  &#9;@grd4_r2 r↦my_health_records∼(c) ∈ record_general_list&#10;  then&#10;  &#9;@act1_r2 record_restricted_list ≔ record_restricted_list ∪{r↦my_health_records∼(c)}&#10;  &#9;@act2_r2 record_general_list ≔ record_general_list ∖ {r↦my_health_records∼(c)}&#10;  end&#10;&#10;  event general_access_record&#10;  any&#10;  &#9;r // record&#10;  &#9;c // consumer&#10;  where&#10;  &#9;@grd1_r2 r ∈ records&#10;  &#9;@grd2_r2 c ∈ consumers&#10;  &#9;@grd3_r2 r↦c∈ownership&#10;  &#9;@grd4_r2 r↦my_health_records∼(c) ∈ record_restricted_list&#10;  then&#10;  &#9;@act1_r2 record_restricted_list ≔ record_restricted_list ∖ {r↦my_health_records∼(c)}&#10;  &#9;@act2_r2 record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}&#10;  end&#10;&#10;  event hide_record&#10;  any&#10;  &#9;r // record&#10;  &#9;c // consumer&#10;  where&#10;  &#9;@grd1_r2 r ∈ records&#10;  &#9;@grd2_r2 c ∈ consumers&#10;  &#9;@grd3_r2 r↦c∈ownership&#10;  &#9;@grd4_r2 r↦my_health_records∼(c) ∈ record_restricted_list ∨ r↦my_health_records∼(c) ∈ record_general_list&#10;  then&#10;  &#9;@act1_r2 record_restricted_list ≔ record_restricted_list ∖ {r↦my_health_records∼(c)}&#10;  &#9;@act2_r2 record_general_list ≔ record_general_list ∖ {r↦my_health_records∼(c)}&#10;  &#9;@act3_r2 record_hide_list ≔ record_hide_list ∪ {r↦my_health_records∼(c)}&#10;  end&#10;&#10;  event unhide_record&#10;  any&#10;  &#9;r // record&#10;  &#9;c // consumer&#10;  where&#10;  &#9;@grd1_r2 r ∈ records&#10;  &#9;@grd2_r2 c ∈ consumers&#10;  &#9;@grd3_r2 r↦c∈ownership&#10;  &#9;@grd4_r2 r↦my_health_records∼(c) ∈ record_hide_list&#10;  then&#10;  &#9;@act2_r2 record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}&#10;  &#9;@act3_r2 record_hide_list ≔ record_hide_list ∖ {r↦my_health_records∼(c)}&#10;  end&#10;&#10;  event remove_record&#10;  any&#10;  &#9;r // record&#10;  &#9;c // consumer&#10;  where&#10;  &#9;@grd1_r2 r ∈ records&#10;  &#9;@grd2_r2 c ∈ consumers&#10;  &#9;@grd3_r2 r↦c∈ownership&#10;  then&#10;  &#9;@act1_r2 record_restricted_list ≔ record_restricted_list ∖ {r↦my_health_records∼(c)}&#10;  &#9;@act2_r2 record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}&#10;  &#9;@act3_r2 record_hide_list ≔ record_hide_list ∖ {r↦my_health_records∼(c)}&#10;  end&#10;end&#10;" version="5">
<org.eventb.core.refinesMachine name="'" org.eventb.core.target="ref1"/>
<org.eventb.core.seesContext name="_8N10kF0LEeq-wtyRsAV-BQ" org.eventb.core.target="ref1_ctx"/>
<org.eventb.core.variable name="_IUjq0Fx0EeqNLv8xNYgXlw" org.eventb.core.comment="models the centralised DB where all health records are held" org.eventb.core.generated="false" org.eventb.core.identifier="health_record_DB"/>
<org.eventb.core.variable name="_pPh3EFx0EeqNLv8xNYgXlw" org.eventb.core.comment="models the people that have health records" org.eventb.core.generated="false" org.eventb.core.identifier="consumers"/>
<org.eventb.core.variable name="_IUjq0lx0EeqNLv8xNYgXlw" org.eventb.core.comment="models registered Health Service Providers." org.eventb.core.generated="false" org.eventb.core.identifier="service_providers"/>
<org.eventb.core.variable name="_pPh3EVx0EeqNLv8xNYgXlw" org.eventb.core.comment="maps Health Recods to Consumers as a one to one relation&#10;             one Health Record belongs to a single consumer and one consumer has&#10;             only one Health Record " org.eventb.core.generated="false" org.eventb.core.identifier="my_health_records"/>
<org.eventb.core.variable name="_pPieIFx0EeqNLv8xNYgXlw" org.eventb.core.comment="maps Consumers to Health Service Provider. A consumer might&#10;             have several (or none) health service providers and a health service provider&#10;             might have several (or none) consumers " org.eventb.core.generated="false" org.eventb.core.identifier="my_health_service_providers"/>
<org.eventb.core.variable name="_IUkR4lx0EeqNLv8xNYgXlw" org.eventb.core.comment="models the access permission to health records from health service providers.&#10;             REFINEMENT 1 " org.eventb.core.generated="false" org.eventb.core.identifier="access_sp_record"/>
<org.eventb.core.variable name="_QdRiUF0MEeq-wtyRsAV-BQ" org.eventb.core.comment="each health resource e.g. a blood test." org.eventb.core.generated="false" org.eventb.core.identifier="records"/>
<org.eventb.core.variable name="_f-TnQF0MEeq-wtyRsAV-BQ" org.eventb.core.comment="maps each record to a My Health Record" org.eventb.core.generated="false" org.eventb.core.identifier="record_mhr"/>
<org.eventb.core.variable name="_f-TnQV0MEeq-wtyRsAV-BQ" org.eventb.core.comment="maps recors to their owner&#10;REFINEMENT 2 " org.eventb.core.generated="false" org.eventb.core.identifier="ownership"/>
<org.eventb.core.event name="_pPieIFx0EeqNLv8xNYgXlx" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="INITIALISATION">
<org.eventb.core.action name="_IhrpIF0qEeqUmKKAftSzKQ" org.eventb.core.assignment="general_access_list_sp ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_IhrpIV0qEeqUmKKAftSzKQ" org.eventb.core.assignment="restricted_access_list_sp ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_VT264F3JEeqUmKKAftSzKQ" org.eventb.core.assignment="revoked_list_sp ≔  ∅" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
<org.eventb.core.action name="_0EU-cF3JEeqUmKKAftSzKQ" org.eventb.core.assignment="record_general_list ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act4_r2"/>
<org.eventb.core.action name="_0EU-cV3JEeqUmKKAftSzKQ" org.eventb.core.assignment="record_restricted_list ≔ ∅" org.eventb.core.generated="false" org.eventb.core.label="act5_r2"/>
<org.eventb.core.action name="_0EU-cl3JEeqUmKKAftSzKQ" org.eventb.core.assignment="record_hide_list ≔  ∅" org.eventb.core.generated="false" org.eventb.core.label="act6_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_tswM0F3TEeqUmKKAftSzKQ" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="remove_access">
<org.eventb.core.refinesEvent name="_tswM0V3TEeqUmKKAftSzKQ" org.eventb.core.target="remove_access"/>
<org.eventb.core.action name="_RHNy8F3XEeq6aIRZkP64Sg" org.eventb.core.assignment="general_access_list_sp ≔ general_access_list_sp∖{sp ↦ my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_RHNy8V3XEeq6aIRZkP64Sg" org.eventb.core.assignment="restricted_access_list_sp ≔ restricted_access_list_sp∖{sp ↦ my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_RHNy8l3XEeq6aIRZkP64Sg" org.eventb.core.assignment="revoked_list_sp ≔ revoked_list_sp∖{sp ↦ my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_pPieIFx0EeqNLv8xNYgXl{" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="opt_in">
<org.eventb.core.refinesEvent name="'" org.eventb.core.target="opt_in"/>
</org.eventb.core.event>
<org.eventb.core.event name="_pPieIFx0EeqNLv8xNYgXl|" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="opt_out">
<org.eventb.core.refinesEvent name="'" org.eventb.core.target="opt_out"/>
<org.eventb.core.action name="_eRi0UF3ZEeq6aIRZkP64Sg" org.eventb.core.assignment="general_access_list_sp ≔ general_access_list_sp ⩥ {my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_vw3K4F3ZEeq6aIRZkP64Sg" org.eventb.core.assignment="restricted_access_list_sp ≔ restricted_access_list_sp ⩥ {my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_vw3K4V3ZEeq6aIRZkP64Sg" org.eventb.core.assignment="revoked_list_sp ≔ revoked_list_sp ⩥ {my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
<org.eventb.core.action name="_0Gyz4F3aEeq6aIRZkP64Sg" org.eventb.core.assignment="record_general_list ≔ ownership∼[{c}] ⩤ record_general_list" org.eventb.core.generated="false" org.eventb.core.label="act5_r2"/>
<org.eventb.core.action name="_4kuXwF3aEeq6aIRZkP64Sg" org.eventb.core.assignment="record_restricted_list ≔ ownership∼[{c}] ⩤ record_restricted_list" org.eventb.core.generated="false" org.eventb.core.label="act6_r2"/>
<org.eventb.core.action name="_4kuXwV3aEeq6aIRZkP64Sg" org.eventb.core.assignment="record_hide_list ≔ ownership∼[{c}] ⩤ record_hide_list" org.eventb.core.generated="false" org.eventb.core.label="act7_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_pPieIFx0EeqNLv8xNYgXl}" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="add_service_provider">
<org.eventb.core.refinesEvent name="'" org.eventb.core.target="add_service_provider"/>
<org.eventb.core.action name="_gxNp0F3bEeq6aIRZkP64Sg" org.eventb.core.assignment="general_access_list_sp ≔ {sp} ⩤ general_access_list_sp" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_nS0VoF3bEeq6aIRZkP64Sg" org.eventb.core.assignment="restricted_access_list_sp ≔ {sp} ⩤ restricted_access_list_sp" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_nS0VoV3bEeq6aIRZkP64Sg" org.eventb.core.assignment="revoked_list_sp ≔ {sp} ⩤ revoked_list_sp" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_pPieIFx0EeqNLv8xNYgXl~" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="delete_service_provider">
<org.eventb.core.refinesEvent name="'" org.eventb.core.target="delete_service_provider"/>
</org.eventb.core.event>
<org.eventb.core.event name="_pPieIFx0EeqNLv8xNYgXm(" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="add_consumer_to_sp">
<org.eventb.core.refinesEvent name="'" org.eventb.core.target="add_consumer_to_sp"/>
<org.eventb.core.action name="_MRkD4F3dEeq6aIRZkP64Sg" org.eventb.core.assignment="general_access_list_sp ≔ general_access_list_sp ∪ {sp↦ my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
</org.eventb.core.event>
<org.eventb.core.invariant name="_CToygF0qEeqUmKKAftSzKQ" org.eventb.core.generated="false" org.eventb.core.label="inv1_r2" org.eventb.core.predicate="general_access_list_sp ∈ service_providers ↔  health_record_DB"/>
<org.eventb.core.variable name="_zAUZMF3IEeqUmKKAftSzKQ" org.eventb.core.comment="maps Health Service Providers with 'General Access' to My Health Record" org.eventb.core.generated="false" org.eventb.core.identifier="general_access_list_sp"/>
<org.eventb.core.variable name="_zAUZMV3IEeqUmKKAftSzKQ" org.eventb.core.comment="maps Health Service Providers with 'Restricted Access' to My Health Record" org.eventb.core.generated="false" org.eventb.core.identifier="restricted_access_list_sp"/>
<org.eventb.core.variable name="_zAUZMl3IEeqUmKKAftSzKQ" org.eventb.core.comment="maps Health Service Providers whose access have been revoked to My Health Record" org.eventb.core.generated="false" org.eventb.core.identifier="revoked_list_sp"/>
<org.eventb.core.invariant name="_ztTbAF3IEeqUmKKAftSzKQ" org.eventb.core.generated="false" org.eventb.core.label="inv2_r2" org.eventb.core.predicate="restricted_access_list_sp ∈ service_providers ↔  health_record_DB"/>
<org.eventb.core.invariant name="_ztTbAV3IEeqUmKKAftSzKQ" org.eventb.core.generated="false" org.eventb.core.label="inv3_r2" org.eventb.core.predicate="revoked_list_sp ∈ service_providers ↔  health_record_DB"/>
<org.eventb.core.variable name="_hMFtIF3JEeqUmKKAftSzKQ" org.eventb.core.comment="maps a record with 'General Access' to the My Health Record it belongs to" org.eventb.core.generated="false" org.eventb.core.identifier="record_general_list"/>
<org.eventb.core.variable name="_hMFtIV3JEeqUmKKAftSzKQ" org.eventb.core.comment="maps a record with 'Restricted Access' to the My Health Record it belongs to" org.eventb.core.generated="false" org.eventb.core.identifier="record_restricted_list"/>
<org.eventb.core.variable name="_hMFtIl3JEeqUmKKAftSzKQ" org.eventb.core.comment="maps a hidden record to the My Health Record it belongs to" org.eventb.core.generated="false" org.eventb.core.identifier="record_hide_list"/>
<org.eventb.core.event name="_zqSWsF3dEeq6aIRZkP64Sg" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="add_record_owner">
<org.eventb.core.refinesEvent name="_zqSWsV3dEeq6aIRZkP64Sg" org.eventb.core.target="add_record"/>
<org.eventb.core.action name="_zqSWsl3dEeq6aIRZkP64Sg" org.eventb.core.assignment="record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_YhqHEF3eEeq6aIRZkP64Sg" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="add_record_sp_general">
<org.eventb.core.refinesEvent name="_YhqHEV3eEeq6aIRZkP64Sg" org.eventb.core.target="add_record"/>
<org.eventb.core.parameter name="_YhqHEl3eEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.guard name="_YhqHE13eEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="sp ∈ service_providers"/>
<org.eventb.core.guard name="_t34dwF3eEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="sp↦my_health_records∼(c) ∈ general_access_list_sp"/>
<org.eventb.core.action name="_OqeKEF3fEeq6aIRZkP64Sg" org.eventb.core.assignment="record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_T9N2EF3fEeq6aIRZkP64Sg" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="add_record_sp_restricted">
<org.eventb.core.refinesEvent name="_T9OdIF3fEeq6aIRZkP64Sg" org.eventb.core.target="add_record"/>
<org.eventb.core.parameter name="_T9OdIV3fEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.guard name="_T9OdIl3fEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="sp ∈ service_providers"/>
<org.eventb.core.guard name="_T9OdI13fEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="sp↦my_health_records∼(c) ∈ restricted_access_list_sp"/>
<org.eventb.core.action name="_T9OdJF3fEeq6aIRZkP64Sg" org.eventb.core.assignment="record_restricted_list ≔ record_restricted_list ∪ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_PMO2gF3jEeq6aIRZkP64Sg" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="grant_access_to_SP">
<org.eventb.core.refinesEvent name="_PMO2gV3jEeq6aIRZkP64Sg" org.eventb.core.target="grant_access"/>
<org.eventb.core.action name="_50UvsF3gEeq6aIRZkP64Sg" org.eventb.core.assignment="general_access_list_sp ≔  general_access_list_sp ∪ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_PMO2gl3jEeq6aIRZkP64Sg" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="give_general_access_to_SP">
<org.eventb.core.parameter name="_PMO2g13jEeq6aIRZkP64Sg" org.eventb.core.comment="service provider" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.parameter name="_Xn8l8V3gEeq6aIRZkP64Sg" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.guard name="_Xn8l8l3gEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="sp ∈ service_providers"/>
<org.eventb.core.guard name="_Xn8l813gEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_Xn8l9F3gEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd3_r2" org.eventb.core.predicate="sp↦my_health_records∼(c) ∉ general_access_list_sp"/>
<org.eventb.core.guard name="_50UIoF3gEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd4_r2" org.eventb.core.predicate="sp↦my_health_records∼(c) ∈ restricted_access_list_sp ∨ sp↦my_health_records∼(c) ∈ revoked_list_sp"/>
<org.eventb.core.action name="_DTn7tl3hEeq6aIRZkP64Sg" org.eventb.core.assignment="general_access_list_sp ≔  general_access_list_sp ∪ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_50UvsV3gEeq6aIRZkP64Sg" org.eventb.core.assignment="restricted_access_list_sp ≔ restricted_access_list_sp ∖ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_aDXDAF3hEeq6aIRZkP64Sg" org.eventb.core.assignment="revoked_list_sp   ≔ revoked_list_sp ∖ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_PMO2hF3jEeq6aIRZkP64Sg" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="give_restricted_access_to_SP">
<org.eventb.core.parameter name="_PMO2hV3jEeq6aIRZkP64Sg" org.eventb.core.comment="service provider" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.parameter name="_DTn7sV3hEeq6aIRZkP64Sg" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.guard name="_DTn7sl3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="sp ∈ service_providers"/>
<org.eventb.core.guard name="_DTn7s13hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_DTn7tF3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd3_r2" org.eventb.core.predicate="sp↦my_health_records∼(c) ∉ restricted_access_list_sp"/>
<org.eventb.core.guard name="_DTn7tV3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd4_r2" org.eventb.core.predicate="sp↦my_health_records∼(c) ∈ general_access_list_sp ∨ sp↦my_health_records∼(c) ∈ revoked_list_sp"/>
<org.eventb.core.action name="_Qygitl3hEeq6aIRZkP64Sg" org.eventb.core.assignment="general_access_list_sp ≔  general_access_list_sp ∖ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_DTn7t13hEeq6aIRZkP64Sg" org.eventb.core.assignment="restricted_access_list_sp ≔ restricted_access_list_sp ∪ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_f676Y13hEeq6aIRZkP64Sg" org.eventb.core.assignment="revoked_list_sp   ≔ revoked_list_sp ∖ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_4ko8ZF3TEeqUmKKAftSzKQ" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="revoke_access_to_SP">
<org.eventb.core.parameter name="_PMO2hl3jEeq6aIRZkP64Sg" org.eventb.core.comment="service provider" org.eventb.core.generated="false" org.eventb.core.identifier="sp"/>
<org.eventb.core.parameter name="_QygisV3hEeq6aIRZkP64Sg" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.guard name="_Qygisl3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="sp ∈ service_providers"/>
<org.eventb.core.guard name="_Qygis13hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_QygitF3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd3_r2" org.eventb.core.predicate="sp↦my_health_records∼(c) ∉ revoked_list_sp"/>
<org.eventb.core.action name="_vMkRZV3hEeq6aIRZkP64Sg" org.eventb.core.assignment="general_access_list_sp ≔  general_access_list_sp ∖ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_Qygit13hEeq6aIRZkP64Sg" org.eventb.core.assignment="restricted_access_list_sp ≔ restricted_access_list_sp ∖ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_vMkRZ13hEeq6aIRZkP64Sg" org.eventb.core.assignment="revoked_list_sp   ≔ revoked_list_sp ∪ {sp↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
<org.eventb.core.guard name="_QygitV3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd4_r2" org.eventb.core.predicate="sp↦my_health_records∼(c) ∈ general_access_list_sp ∨ sp↦my_health_records∼(c) ∈ restricted_access_list_sp"/>
</org.eventb.core.event>
<org.eventb.core.event name="_Ad7M0F3UEeqUmKKAftSzKQ" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="restrict_record">
<org.eventb.core.parameter name="_Xn8l8F3gEeq6aIRZkP64Sg" org.eventb.core.comment="record" org.eventb.core.generated="false" org.eventb.core.identifier="r"/>
<org.eventb.core.guard name="_f67TUl3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="r ∈ records"/>
<org.eventb.core.guard name="_f67TU13hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_f676YF3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd3_r2" org.eventb.core.predicate="r↦c∈ownership"/>
<org.eventb.core.parameter name="_f67TUV3hEeq6aIRZkP64Sg" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.action name="_PMPdkF3jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_restricted_list ≔ record_restricted_list ∪{r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_f676Yl3hEeq6aIRZkP64Sg" org.eventb.core.assignment="record_general_list ≔ record_general_list ∖ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.guard name="_f676YV3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd4_r2" org.eventb.core.predicate="r↦my_health_records∼(c) ∈ record_general_list"/>
</org.eventb.core.event>
<org.eventb.core.event name="_Ad7z4l3UEeqUmKKAftSzKQ" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="general_access_record">
<org.eventb.core.parameter name="_DTn7sF3hEeq6aIRZkP64Sg" org.eventb.core.comment="record" org.eventb.core.generated="false" org.eventb.core.identifier="r"/>
<org.eventb.core.guard name="_vMkRYl3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="r ∈ records"/>
<org.eventb.core.guard name="_vMkRY13hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_vMkRZF3hEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd3_r2" org.eventb.core.predicate="r↦c∈ownership"/>
<org.eventb.core.parameter name="_vMkRYV3hEeq6aIRZkP64Sg" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.action name="_PMPdkV3jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_restricted_list ≔ record_restricted_list ∖ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_vMkRZl3hEeq6aIRZkP64Sg" org.eventb.core.assignment="record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.guard name="_nVOaUF3kEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd4_r2" org.eventb.core.predicate="r↦my_health_records∼(c) ∈ record_restricted_list"/>
</org.eventb.core.event>
<org.eventb.core.event name="_Ad7z4F3UEeqUmKKAftSzKQ" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="hide_record">
<org.eventb.core.parameter name="_QygisF3hEeq6aIRZkP64Sg" org.eventb.core.comment="record" org.eventb.core.generated="false" org.eventb.core.identifier="r"/>
<org.eventb.core.guard name="_PMPdkl3jEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="r ∈ records"/>
<org.eventb.core.guard name="_PMPdk13jEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_PMPdlF3jEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd3_r2" org.eventb.core.predicate="r↦c∈ownership"/>
<org.eventb.core.parameter name="_PMPdlV3jEeq6aIRZkP64Sg" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.action name="_PMPdll3jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_restricted_list ≔ record_restricted_list ∖ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_PMPdl13jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_general_list ≔ record_general_list ∖ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_PMPdmF3jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_hide_list ≔ record_hide_list ∪ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
<org.eventb.core.guard name="_ucKAwF3kEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd4_r2" org.eventb.core.predicate="r↦my_health_records∼(c) ∈ record_restricted_list ∨ r↦my_health_records∼(c) ∈ record_general_list"/>
</org.eventb.core.event>
<org.eventb.core.event name="_DTnUoF3hEeq6aIRZkP64Sg" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="unhide_record">
<org.eventb.core.parameter name="_f67TUF3hEeq6aIRZkP64Sg" org.eventb.core.comment="record" org.eventb.core.generated="false" org.eventb.core.identifier="r"/>
<org.eventb.core.parameter name="_PMPdmV3jEeq6aIRZkP64Sg" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.guard name="_PMPdml3jEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="r ∈ records"/>
<org.eventb.core.guard name="_PMPdm13jEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_PMQEoF3jEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd3_r2" org.eventb.core.predicate="r↦c∈ownership"/>
<org.eventb.core.guard name="_ucKn0F3kEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd4_r2" org.eventb.core.predicate="r↦my_health_records∼(c) ∈ record_hide_list"/>
<org.eventb.core.action name="_PMQEoV3jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_PMQEol3jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_hide_list ≔ record_hide_list ∖ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_Ad7z4V3UEeqUmKKAftSzKQ" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="remove_record">
<org.eventb.core.parameter name="_vMkRYF3hEeq6aIRZkP64Sg" org.eventb.core.comment="record" org.eventb.core.generated="false" org.eventb.core.identifier="r"/>
<org.eventb.core.parameter name="_PMQEo13jEeq6aIRZkP64Sg" org.eventb.core.comment="consumer" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
<org.eventb.core.guard name="_PMQEpF3jEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd1_r2" org.eventb.core.predicate="r ∈ records"/>
<org.eventb.core.guard name="_PMQEpV3jEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd2_r2" org.eventb.core.predicate="c ∈ consumers"/>
<org.eventb.core.guard name="_PMQEpl3jEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="grd3_r2" org.eventb.core.predicate="r↦c∈ownership"/>
<org.eventb.core.action name="_PMQEp13jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_restricted_list ≔ record_restricted_list ∖ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act1_r2"/>
<org.eventb.core.action name="_PMQEqF3jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_general_list ≔ record_general_list ∪ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act2_r2"/>
<org.eventb.core.action name="_PMQEqV3jEeq6aIRZkP64Sg" org.eventb.core.assignment="record_hide_list ≔ record_hide_list ∖ {r↦my_health_records∼(c)}" org.eventb.core.generated="false" org.eventb.core.label="act3_r2"/>
</org.eventb.core.event>
<org.eventb.core.invariant name="_Iy0n8F3kEeq6aIRZkP64Sg" org.eventb.core.comment="each Health Service Provider has only one access level to a My Health Record" org.eventb.core.generated="false" org.eventb.core.label="inv4_r2" org.eventb.core.predicate="general_access_list_sp ∩ restricted_access_list_sp ∩ revoked_list_sp = ∅"/>
<org.eventb.core.invariant name="_Iy0n8V3kEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="inv5_r2" org.eventb.core.predicate="general_access_list_sp ∪ restricted_access_list_sp ∪ revoked_list_sp = access_sp_record"/>
<org.eventb.core.invariant name="_Iy0n8l3kEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="inv6_r2" org.eventb.core.predicate="record_general_list ∈ records ↔ health_record_DB"/>
<org.eventb.core.invariant name="_Iy0n813kEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="inv7_r2" org.eventb.core.predicate="record_restricted_list ∈ records ↔ health_record_DB"/>
<org.eventb.core.invariant name="_Iy0n9F3kEeq6aIRZkP64Sg" org.eventb.core.generated="false" org.eventb.core.label="inv8_r2" org.eventb.core.predicate="record_hide_list ∈ records ↔ health_record_DB"/>
<org.eventb.core.invariant name="_Iy0n9V3kEeq6aIRZkP64Sg" org.eventb.core.comment="each report has only one access level" org.eventb.core.generated="false" org.eventb.core.label="inv9_r2" org.eventb.core.predicate="record_general_list ∩ record_restricted_list ∩ record_hide_list = ∅"/>
<org.eventb.core.invariant name="_Iy0n9l3kEeq6aIRZkP64Sg" org.eventb.core.comment="To check: the owner of the record has all permissions" org.eventb.core.generated="false" org.eventb.core.label="inv10_r2" org.eventb.core.predicate="record_general_list ∪ record_restricted_list ∪ record_hide_list = record_mhr"/>
</org.eventb.core.machineFile>
